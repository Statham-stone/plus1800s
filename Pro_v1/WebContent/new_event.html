<!DOCTYPE html>
<!--[if IE 9 ]><html class="ie9"><![endif]-->

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <meta name="format-detection" content="telephone=no">
    <meta charset="UTF-8">

    <meta name="description" content="Violate Responsive Admin Template">
    <meta name="keywords" content="Super Admin, Admin, Template, Bootstrap">

    <title>Time Pluser 1.0</title>

    <!-- CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/animate.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/form.css" rel="stylesheet">
    <link href="css/calendar.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/icons.css" rel="stylesheet">
    <link href="css/generics.css" rel="stylesheet">
    <script type="text/javascript">
	
	function setCookies(c_name,value,expiredays)
	{
		var exdate = new Date()
		exdate.setDate(exdate.getDate()+expiredays)
		document.cookie=c_name+ "=" +escape(value)+
			((expiredays==null) ? "" : "; expires="+exdate.toGMTString())
	}
	
	function getCookie(c_name)
	{
	if (document.cookie.length>0)
	  {
	  c_start=document.cookie.indexOf(c_name + "=")
	  if (c_start!=-1)
	    { 
	    c_start=c_start + c_name.length+1 
	    c_end=document.cookie.indexOf(";",c_start)
	    if (c_end==-1) c_end=document.cookie.length
	    return unescape(document.cookie.substring(c_start,c_end))
	    } 
	  }
	return ""
	}
    
	function checkCookies()
	{
		uid=getCookie('uid')
		if (uid==null || uid=="") 
		{
			alert("You are not logged in! please log in first.")
			window.location.href="./login.html"	
		} else {
			document.getElementById("usernametag").innerHTML="uid:"+uid;
		}
	}
	
    function signOut()
    {
    	setCookies("uid","",10);			//erase login information
    	window.location.href="./login.html"	//return to login page
    }
    
    function searchKeyDown()
    {
    	if (event.keyCode==13)
    	{
    		//alert("entered:"+$("#searchbox").val());
    		window.location.href="./searchresult?key="+$("#searchbox").val();
    	}
    }
    
    function loadTableBrief()
    {
		var params = {
		    	uid : getCookie("uid")
			};
			$.ajax({
		    	type: "POST",
		    	url: "loadTableBrief.action",
		    	data: params,
		    	dataType:"text", //ajax返回值设置为text（json格式也可用它返回，可打印出结果，也可设置成json）
		    	success: function(json){  
		    		var obj = $.parseJSON(json);  //使用这个方法解析json
		            var state_value = obj.result;  //result是和action中定义的result变量的get方法对应的
		            console.log(json);
		    		//state_value is the returned value
		    		//alert(state_value);
		    		var tableSet = state_value.split("~");
		    		txt="";
		    		for (var i=0;i<tableSet.length;i++)
		    		{
		    			txt=txt+"<option>"+tableSet[i]+"</option>"	
		    		}
		    		
		    		document.getElementById("tableselect").innerHTML=txt;
		    	},
		    	error: function(json){
		    		console.log(json);
		     		return false;
		    	}
		    });
			loadTableContent(document.getElementById("tableselect"));
    }
    
    function loadTableContent(osel)
    {
    	//alert(osel.options[osel.selectedIndex].text);
		var params = {
		    	uid : getCookie("uid"),
		    	tablename:osel.options[osel.selectedIndex].text
			};
		$.ajax({
	    	type: "POST",
	    	url: "loadTableContent.action",
	    	data: params,
	    	dataType:"text", //ajax返回值设置为text（json格式也可用它返回，可打印出结果，也可设置成json）
	    	success: function(json){  
	    		var obj = $.parseJSON(json);  //使用这个方法解析json
	            var state_value = obj.result;  //result是和action中定义的result变量的get方法对应的
	            console.log(json);
	    		//state_value is the returned value
	    		//alert(state_value);
	    		var thingSet = state_value.split("^");
	    		txt="";
	    		for (var i=0;i<thingSet.length;i++)
	    		{
	    			txt=txt+"<li "+"onclick=\"addThing(this)\""+" class=\"list-group-item\">"+thingSet[i]+"</li>";
	    		}
	    		
	    		document.getElementById("tableview").innerHTML=txt;
	    	},
	    	error: function(json){
	    		console.log(json);
	     		return false;
	    	}
	    });		
    }
    
    function addThing(thing)
    {
    	alert(thing.innerHTML);
    }
    
    function searchAjaxReq()
    {
    	if (event.keyCode==13)
    	{
    		alert("entered:"+$("#searchrequest").val());
    	}    	
    }
    
    </script>
    
</head>
<!-- onload="checkCookies()" -->
<body id="skin-blur-violate"onload="checkCookies(); loadTableBrief()" >


    <header id="header" class="media">
        <a href="" id="menu-toggle"></a>
        <a class="logo pull-left" href="index.jsp">TIME PLUSER 1.0</a>

        <div class="media-body">
            <div class="media" id="top-menu">
                <div id="time" class="pull-right">
                    <span id="hours"></span> :
                    <span id="min"></span> :
                    <span id="sec"></span>
                </div>

                <div class="media-body">
                    <input type="text" class="main-search" id="searchbox" onkeydown="searchKeyDown()">
                </div>
            </div>
        </div>
    </header>

    <div class="clearfix"></div>

    <section id="main" class="p-relative" role="main">

        <!-- Sidebar -->
        <aside id="sidebar">

            <!-- Sidbar Widgets -->
            <div class="side-widgets overflow">
                <!-- Profile Menu -->
                <div class="text-center s-widget m-b-25 dropdown" id="profile-menu">
                    <br/>
                    <h4 class="m-0" id="usernametag"></h4>
                    <a href="#" id="signoutlink" onclick="signOut()">Sign Out</a>
                </div>

                <!-- Calendar -->
                <div class="s-widget m-b-25">
                    <div id="sidebar-calendar"></div>
                </div>

                <!-- Feeds -->
                <div class="s-widget m-b-25">
                    <h2 class="tile-title">
                        News Feeds
                    </h2>

                    <div class="s-widget-body">
                        <div id="news-feed"></div>
                    </div>
                </div>

                <!-- Projects -->

            </div>

            <!-- Side Menu -->
            <ul class="list-unstyled side-menu">
                <li >
                    <a class="sa-side-home" href="index.jsp">
                        <span class="menu-item">Dashboard</span>
                    </a>
                </li>
                <li class="active">
                    <a class="sa-side-typography" href="new_event.html">
                        <span class="menu-item">Create Event</span>
                    </a>
                </li>
                <li>
                    <a class="sa-side-widget" href="new_littlething.html">
                        <span class="menu-item">Create Little Thing</span>
                    </a>
                </li>
                <li>
                    <a class="sa-side-table" href="new_table.html">
                        <span class="menu-item">Create Table</span>
                    </a>
                </li>


                <li>
                    <a class="sa-side-chart" href="charts.html">
                        <span class="menu-item">Statistics</span>
                    </a>
                </li>

            </ul>

        </aside>

        <!-- Content -->
        <section id="content" class="container">
            <h4 class="page-title">CREATE EVENT</h4>
            <div class="block-area">
                <div class="row">
                    <div class="col-md-8">
                        
                        <!-- TABLE CHECK -->
                        <select class="form-control input-lg m-b-10" id="tableselect" onchange="loadTableContent(this)">
                            <option>Option 1</option>
                            <option>Option 2</option>
                            <option>Option 3</option>
                        </select>
                        <!-- TABEL VIEW -->
                        <ul class="list-group block" id="tableview">
                        	<!-- INSERT LOADED TABLE HERE -->
                        </ul>
                        <!-- SEARCHB BOX -->
                        <input type="text" class="main-search" id="searchrequest" onkeydown="searchAjaxReq()">
                        <!-- SEARCH RESULT -->
                        <p>Search Result</p>
                        <ul class="list-group block" id="searchresult">
                            <li class="list-group-item">Cras justo odio<span class="badge">14</span></li>
                            <li class="list-group-item">Dapibus ac facilisis in<span class="badge">23</span></li>
                            <li class="list-group-item">Morbi leo risus<span class="badge">9</span></li>
                            <li class="list-group-item">Porta ac consectetur ac<span class="badge">10</span></li>
                            <li class="list-group-item">Vestibulum at eros<span class="badge">2</span></li>
                        </ul>



                        <div class="clearfix"></div>
                    </div>

                    <div class="col-md-4">

                        
                        <!-- SELECTED ITEMS -->
                         <div class="block-area" id="responsiveTable">
                            <h3 class="block-title">SELECTED THINGS</h3>
                            <div class="table-responsive overflow">
                                <table class="table tile" id="tableselected">
                                    <thead>
                                        <tr>
                                            <th>No.</th>
                                            <th>First Name</th>
                                            <th>Last Name</th>
                                            <th>Username</th>
                                            <th>Password</th>
                                            <th>Email</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>Jhon </td>
                                            <td>Makinton </td>
                                            <td>@makinton</td>
                                            <td>123@makinton</td>
                                            <td>mak@live.com</td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>Malinda</td>
                                            <td>Hollaway</td>
                                            <td>@hollway</td>
                                            <td>hollaway@mal</td>
                                            <td>holla@asianet.ch</td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>Wayn</td>
                                            <td>Parnel</td>
                                            <td>@wayne123</td>
                                            <td>wayn@3rt</td>
                                            <td>wayne-parn@gmail.com</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- COMMENT AREA -->
                        <div class="col-md-12" >
                            <textarea id="commenttext" class="form-control m-b-10" placeholder="Comments"></textarea>
                        </div>
                        <!-- SUBMIT BUTTON -->
                        <div class="col-md-10" >
                            <button id="submitevent" type="submit" class="btn btn-sm">Save Event</button>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </section>


    </section>

    <!-- Javascript Libraries -->
    <!-- jQuery -->
    <script src="js/jquery.min.js"></script>
    <!-- jQuery Library -->
    <script src="js/jquery-ui.min.js"></script>
    <!-- jQuery UI -->
    <script src="js/jquery.easing.1.3.js"></script>
    <!-- jQuery Easing - Requirred for Lightbox + Pie Charts-->

    <!-- Bootstrap -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Charts -->
    <script src="js/charts/jquery.flot.js"></script>
    <!-- Flot Main -->
    <script src="js/charts/jquery.flot.time.js"></script>
    <!-- Flot sub -->
    <script src="js/charts/jquery.flot.animator.min.js"></script>
    <!-- Flot sub -->
    <script src="js/charts/jquery.flot.resize.min.js"></script>
    <!-- Flot sub - for repaint when resizing the screen -->

    <script src="js/sparkline.min.js"></script>
    <!-- Sparkline - Tiny charts -->
    <script src="js/easypiechart.js"></script>
    <!-- EasyPieChart - Animated Pie Charts -->
    <script src="js/charts.js"></script>
    <!-- All the above chart related functions -->

    <!-- Map -->
    <script src="js/maps/jvectormap.min.js"></script>
    <!-- jVectorMap main library -->
    <script src="js/maps/usa.js"></script>
    <!-- USA Map for jVectorMap -->

    <!--  Form Related -->
    <script src="js/icheck.js"></script>
    <!-- Custom Checkbox + Radio -->

    <!-- UX -->
    <script src="js/scroll.min.js"></script>
    <!-- Custom Scrollbar -->

    <!-- Other -->
    <script src="js/calendar.min.js"></script>
    <!-- Calendar -->
    <script src="js/feeds.min.js"></script>
    <!-- News Feeds -->


    <!-- All JS functions -->
    <script src="js/functions.js"></script>
</body>

</html>